<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      lang="fr"
      th:replace="~{fragments/_layout :: base(~{::body})}">
<body class="bg-gray-50">

<!-- HERO -->
<!-- 
<section class="bg-gradient-to-r from-green-500 to-blue-600 text-white py-16 shadow-md">
    <div class="max-w-6xl mx-auto px-4 text-center">
        <h1 class="text-4xl md:text-5xl font-extrabold mb-4 drop-shadow-lg">
            Bienvenue sur <span class="text-yellow-300">HamsterDeal.ch</span>
        </h1>
        <p class="text-lg md:text-xl text-white/90 mb-8">
            Trouvez, vendez et √©changez en toute simplicit√©.
        </p>

         Barre recherche 
        <form th:action="@{/ads}" method="get"
              class="flex flex-col sm:flex-row max-w-2xl mx-auto bg-white rounded-lg overflow-hidden shadow-lg">
            <input
                    type="text"
                    name="q"
                    placeholder="Que cherchez-vous ?"
                    class="flex-1 px-4 py-3 text-gray-700 focus:outline-none"
            />
            <button
                    class="bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-semibold px-6 py-3 transition">
                üîç Rechercher
            </button>
        </form>
    </div>
</section> 
-->


    <!-- SECTION CAT√âGORIES -->

        <!-- Voici ton code existant de la section cat√©gories -->
<!-- CATEGORIES -->
<section class="">
  <div class="max-w-6xl mx-auto px-4">
    <h2 class="text-2xl font-bold mb-6">Cat√©gories</h2>

    <!-- Cat√©gories visibles (3) -->
    <div class="flex flex-wrap items-center gap-6">
      <!-- 3 cat√©gories visibles -->
      <a th:href="@{/ads(category='car')}" class="flex flex-col items-center gap-2 group">
        <svg viewBox="0 0 24 24"
             class="w-10 h-10 p-2 rounded-full bg-white shadow group-hover:shadow-md transition text-green-600">
          <path d="M3 13h18l-1.2-3.6a3 3 0 0 0-2.84-2.04H7.04A3 3 0 0 0 4.2 9.4L3 13Z" fill="currentColor" />
        </svg>
        <span class="text-sm font-medium">Voitures</span>
      </a>

      <a th:href="@{/ads(category='electronics')}" class="flex flex-col items-center gap-2 group">
        <svg viewBox="0 0 24 24"
             class="w-10 h-10 p-2 rounded-full bg-white shadow group-hover:shadow-md transition text-green-600">
          <rect x="7" y="7" width="10" height="10" rx="2" fill="currentColor"/>
          <path d="M12 2v3M12 19v3M2 12h3M19 12h3" stroke="currentColor" stroke-width="1.5" fill="none"/>
        </svg>
        <span class="text-sm font-medium">√âlectronique</span>
      </a>

      <a th:href="@{/ads(category='home')}" class="flex flex-col items-center gap-2 group">
        <svg viewBox="0 0 24 24"
             class="w-10 h-10 p-2 rounded-full bg-white shadow group-hover:shadow-md transition text-green-600">
          <path d="M3 11l9-7 9 7v8a2 2 0 0 1-2 2h-4v-6H9v6H5a2 2 0 0 1-2-2v-8z" fill="currentColor"/>
        </svg>
        <span class="text-sm font-medium">Maison</span>
      </a>

      <!-- Trois petits points -->
      <span class="text-2xl text-gray-400 select-none">...</span>

      <!-- Bouton pour ouvrir toutes les cat√©gories -->
      <button id="openCategoriesBtn"
              class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg shadow text-sm font-medium">
        Voir toutes les cat√©gories
      </button>
    </div>
  </div>

  <!-- Panneau lat√©ral (off-canvas) -->
<div id="categoriesPanel"
     class="fixed top-0 right-0 h-full w-72 bg-white shadow-2xl transform translate-x-[100%] transition-transform duration-300 z-50 overflow-y-auto">

    <!-- En-t√™te -->
    <div class="flex justify-between items-center p-4 border-b">
      <h3 class="text-lg font-semibold">Toutes les cat√©gories</h3>
      <button id="closeCategoriesBtn" class="text-gray-500 hover:text-red-500 text-2xl">&times;</button>
    </div>

    <!-- Liste compl√®te de cat√©gories -->
            <!-- Voitures -->
            <a th:href="@{/ads(category='car')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <path d="M3 13h18l-1.2-3.6a3 3 0 0 0-2.84-2.04H7.04A3 3 0 0 0 4.2 9.4L3 13Z" fill="currentColor" />
                    <circle cx="7" cy="17" r="2" />
                    <circle cx="17" cy="17" r="2" />
                </svg>
                <span class="text-xs font-medium">Voitures</span>
            </a>

            <!-- √âlectronique -->
            <a th:href="@{/ads(category='electronics')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <rect x="7" y="7" width="10" height="10" rx="2" fill="currentColor"/>
                    <path d="M12 2v3M12 19v3M2 12h3M19 12h3M5 5l2 2M17 17l2 2M19 5l-2 2M7 17l-2 2" stroke="currentColor" stroke-width="1.5" fill="none"/>
                </svg>
                <span class="text-sm font-medium">√âlectronique</span>
            </a>

            <!-- Maison -->
            <a th:href="@{/ads(category='home')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <path d="M3 11l9-7 9 7v8a2 2 0 0 1-2 2h-4v-6H9v6H5a2 2 0 0 1-2-2v-8z" fill="currentColor"/>
                </svg>
                <span class="text-sm font-medium">Maison</span>
            </a>

            <!-- Mode -->
            <a th:href="@{/ads(category='fashion')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <path d="M8 6l4-2 4 2 2 6-6 8-6-8 2-6z" fill="currentColor"/>
                </svg>
                <span class="text-sm font-medium">Mode</span>
            </a>

            <!-- Sport -->
            <a th:href="@{/ads(category='sports')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5" fill="none"/>
                    <path d="M3 12h18M12 3v18M5 5l14 14" stroke="currentColor" stroke-width="1.5"/>
                </svg>
                <span class="text-sm font-medium">Sport</span>
            </a>

            <!-- Jouets -->
            <a th:href="@{/ads(category='toys')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <circle cx="8" cy="9" r="3" fill="currentColor"/>
                    <circle cx="16" cy="9" r="3" fill="currentColor"/>
                    <rect x="6" y="12" width="12" height="7" rx="2" fill="currentColor"/>
                </svg>
                <span class="text-sm font-medium">Jouets</span>
            </a>

            <!-- Livres -->
            <a th:href="@{/ads(category='books')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <path d="M5 4h8a3 3 0 0 1 3 3v13H8a3 3 0 0 1-3-3V4z" fill="currentColor"/>
                    <path d="M9 4h8a3 3 0 0 1 3 3v13h-8" stroke="currentColor" stroke-width="1.5" fill="none"/>
                </svg>
                <span class="text-sm font-medium">Livres</span>
            </a>

            <!-- Musique -->
            <a th:href="@{/ads(category='music')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <path d="M14 3v10.5a3.5 3.5 0 1 1-1.5-2.9V6l7-2v7.5a3.5 3.5 0 1 1-1.5-2.9V3l-4 1z" fill="currentColor"/>
                </svg>
                <span class="text-sm font-medium">Musique</span>
            </a>

            <!-- Jeux vid√©o -->
            <a th:href="@{/ads(category='gaming')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <rect x="3" y="9" width="18" height="8" rx="4" fill="currentColor"/>
                    <circle cx="16.5" cy="13" r="1.25" fill="#fff"/>
                    <circle cx="18.5" cy="11" r="1.25" fill="#fff"/>
                    <circle cx="18.5" cy="15" r="1.25" fill="#fff"/>
                    <circle cx="14.5" cy="13" r="1.25" fill="#fff"/>
                </svg>
                <span class="text-sm font-medium">Jeux vid√©o</span>
            </a>

            <!-- Outils -->
            <a th:href="@{/ads(category='tools')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <path d="M14 3l7 7-4 4-7-7-3 3-4-4 3-3 4 4z" fill="currentColor"/>
                </svg>
                <span class="text-sm font-medium">Bricolage / Outils</span>
            </a>

            <!-- Jardin -->
            <a th:href="@{/ads(category='garden')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <path d="M12 2a7 7 0 0 0 0 14 7 7 0 0 0 0-14zm0 14v6" stroke="currentColor" stroke-width="1.5" fill="none"/>
                </svg>
                <span class="text-sm font-medium">Jardin</span>
            </a>

            <!-- Animaux -->
            <a th:href="@{/ads(category='pets')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <circle cx="6" cy="8" r="2" fill="currentColor"/>
                    <circle cx="18" cy="8" r="2" fill="currentColor"/>
                    <path d="M12 14a6 6 0 0 0-6 6h12a6 6 0 0 0-6-6z" fill="currentColor"/>
                </svg>
                <span class="text-sm font-medium">Animaux</span>
            </a>

            <!-- Meubles -->
            <a th:href="@{/ads(category='furniture')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <rect x="4" y="8" width="16" height="8" fill="currentColor"/>
                    <path d="M4 8V6h16v2M4 16v2m16-2v2" stroke="currentColor" stroke-width="1.5"/>
                </svg>
                <span class="text-sm font-medium">Meubles</span>
            </a>

            <!-- Art -->
            <a th:href="@{/ads(category='art')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <path d="M4 20h16v-2H4v2zm2-4h12l-6-12-6 12z" fill="currentColor"/>
                </svg>
                <span class="text-sm font-medium">Art</span>
            </a>

            <!-- Collections -->
            <a th:href="@{/ads(category='collectibles')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <circle cx="8" cy="12" r="3" fill="currentColor"/>
                    <circle cx="16" cy="12" r="3" fill="currentColor"/>
                    <rect x="8" y="9" width="8" height="6" fill="currentColor"/>
                </svg>
                <span class="text-sm font-medium">Collections</span>
            </a>

            <!-- Immobilier -->
            <a th:href="@{/ads(category='realestate')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <path d="M3 10l9-7 9 7v10a2 2 0 0 1-2 2h-4v-6H9v6H5a2 2 0 0 1-2-2V10z" fill="currentColor"/>
                </svg>
                <span class="text-sm font-medium">Immobilier</span>
            </a>

            <!-- Services -->
            <a th:href="@{/ads(category='services')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <circle cx="12" cy="12" r="9" fill="currentColor"/>
                    <path d="M12 6v6l4 2" stroke="#fff" stroke-width="1.5" fill="none"/>
                </svg>
                <span class="text-sm font-medium">Services</span>
            </a>

            <!-- Autre -->
            <a th:href="@{/ads(category='other')}" class="flex flex-col items-center gap-2 group">
                <svg viewBox="0 0 24 24" class="w-8 h-8 p-1.5 rounded-full bg-white shadow group-hover:shadow-md transition">
                    <path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z" fill="currentColor"/>
                    <path d="M12 8v4" stroke="#fff" stroke-width="1.5"/>
                    <circle cx="12" cy="16" r="1" fill="#fff"/>
                </svg>
                <span class="text-sm font-medium">Autre</span>
            </a>

        </div>

</section>



<!-- SECTION CANTONS -->

<div class="flex-1 bg-green-200 p-4">
    <section>
        <object type="image/svg+xml"
                data="@{/static/img/Suisse_cantons_labels_js.svg}"
                width="50%" height="50%">
            Votre navigateur ne supporte pas les SVG.
        </object>

    
 </section>

</div>
<!-- DERNIERES ANNONCES -->
<section class="py-12">
    <div class="max-w-6xl mx-auto px-4">
        <h2 class="text-2xl font-bold mb-6">Derni√®res annonces</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">

            <article th:each="ad : ${latest}"
                     class="bg-white rounded-xl shadow hover:shadow-xl overflow-hidden group transition">
                <a th:href="@{'/ad/' + ${ad.id}}" class="block">
                    <div class="relative">
                        <img th:if="${ad.images != null and !ad.images.isEmpty()}"
                             th:src="${ad.images.get(0).url}"
                             alt=""
                             loading="lazy"
                             class="w-full h-48 object-cover group-hover:scale-105 transition duration-300">
                        <!-- Prix badge -->
                        <span class="absolute bottom-2 right-2 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded">
              <span th:text="${ad.price + ' CHF'}"></span>
            </span>
                    </div>
                    <div class="p-4">
                        <h3 class="text-lg font-semibold mb-1 line-clamp-1" th:text="${ad.title}"></h3>
                        <p class="text-gray-500 text-sm line-clamp-2" th:text="${ad.description}"></p>
                    </div>
                </a>
            </article>

        </div>
    </div>
</section>
<script>document.addEventListener("DOMContentLoaded", () => {
    const cantons = document.querySelectorAll("svg .canton");

    cantons.forEach(c => {
        const id = c.getAttribute("id").replace("canton-", ""); // ex: "VD"
        c.style.fill = "white";
        c.style.stroke = "green";
        c.style.cursor = "pointer";

        // clic = redirection vers la page annonces filtr√©e
        c.addEventListener("click", () => {
            const url = `/ads?q=&category=&canton=${id}`;
            window.location.href = url;
        });

        // hover visuel
        c.addEventListener("mouseenter", () => {
            c.style.fill = "#22c55e"; // vert Tailwind
        });
        c.addEventListener("mouseleave", () => {
            c.style.fill = "white";
        });
    });

    // üî• Tous les labels cliquables
    const labels = document.querySelectorAll("svg text, svg rect.label-box");

    labels.forEach(label => {
        label.style.cursor = "pointer";
        label.style.userSelect = "none";

        // R√©cup√©ration du canton depuis l'id du label
        // label-text-VD  ‚Üí  VD
        const cantonId = label.id.replace("label-text-", "").replace("label-box-", "");
        const cantonPath = document.getElementById("canton-" + cantonId);

        if (!cantonPath) return;

        // CLICK : identique au canton
        label.addEventListener("click", () => {
            cantonPath.dispatchEvent(new Event("click"));
        });

        // HOVER : identique au canton
        label.addEventListener("mouseenter", () => {
            cantonPath.style.fill = "#22c55e";
        });

        label.addEventListener("mouseleave", () => {
            cantonPath.style.fill = "white";
        });
    });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const openBtn = document.getElementById("openCategoriesBtn");
  const closeBtn = document.getElementById("closeCategoriesBtn");
  const panel = document.getElementById("categoriesPanel");
  const overlay = document.getElementById("overlay");

  openBtn.addEventListener("click", () => {
    panel.classList.remove("translate-x-[100%]");
    overlay.classList.remove("hidden");
  });

  const closePanel = () => {
    panel.classList.add("translate-x-[100%]");
    overlay.classList.add("hidden");
  };

  closeBtn.addEventListener("click", closePanel);
  overlay.addEventListener("click", closePanel);
});
</script>





</body>
</html>
